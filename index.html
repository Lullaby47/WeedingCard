<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    
    <!-- Primary Title -->
    <title>Invitation to Our Wedding ¬∑ ‡§Ü‡§Ø‡•Å‡§∑ & ‡§Ü‡§Ø‡•Å‡§∑‡§æ</title>
    
    <!-- Meta tags for professional link sharing -->
    <meta property="og:title" content="Invitation to Our Wedding ¬∑ ‡§Ü‡§Ø‡•Å‡§∑ & ‡§Ü‡§Ø‡•Å‡§∑‡§æ" />
    <meta property="og:description" content="We invite you to celebrate our wedding. Join us for this special occasion at Durga Party Palace, Itahari!" />
    <meta property="og:image" content="https://weedingcard-production.up.railway.app/images/wedding-preview.jpg" />
    <meta property="og:url" content="https://weedingcard-production.up.railway.app" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="‡§Ü‡§Ø‡•Å‡§∑ & ‡§Ü‡§Ø‡•Å‡§∑‡§æ Wedding" />
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Invitation to Our Wedding ¬∑ ‡§Ü‡§Ø‡•Å‡§∑ & ‡§Ü‡§Ø‡•Å‡§∑‡§æ" />
    <meta name="twitter:description" content="We invite you to celebrate our wedding. Join us for this special occasion at Durga Party Palace, Itahari!" />
    <meta name="twitter:image" content="https://weedingcard-production.up.railway.app/images/wedding-preview.jpg" />
    
    <!-- Fallback meta description -->
    <meta name="description" content="We invite you to celebrate the wedding of ‡§ö‡§ø‡§∞‡§Ç‡§ú‡•Ä‡§µ‡•Ä ‡§Ü‡§Ø‡•Å‡§∑ ‡§™‡•ã‡§ñ‡§∞‡•á‡§≤ & ‡§Ü‡§Ø‡•Å‡§∑‡§æ ‡§Ü‡§ö‡§æ‡§∞‡•ç‡§Ø on Feb 25th, 2026 at Durga Party Palace, Itahari." />
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Cormorant Garamond', 'Times New Roman', serif;
            padding: 1rem;
            background-image: radial-gradient(circle at 20% 30%, #f3dbd2 5%, transparent 30%),
                              radial-gradient(circle at 90% 70%, #f1d5cb 8%, transparent 40%);
            overflow-x: hidden;
            position: relative;
            width: 100%;
        }

        /* Glitter effect */
        .glitter {
            position: fixed;
            top: -20px;
            width: clamp(4px, 1vw, 12px);
            height: clamp(4px, 1vw, 12px);
            background: radial-gradient(circle, rgba(255, 255, 255, 0.9), rgba(255, 215, 0, 0.7), rgba(255, 255, 255, 0));
            border-radius: 50%;
            pointer-events: none;
            z-index: 99999;
            filter: blur(0.5px);
            box-shadow: 0 0 15px gold, 0 0 30px #ffd700;
            animation: glitterFall linear infinite;
            will-change: transform, opacity;
        }

        @keyframes glitterFall {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 0.9;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* trumpeters */
        .trumpeter {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            font-size: clamp(3rem, 15vw, 6rem);
            z-index: 9999;
            pointer-events: none;
            filter: drop-shadow(0 20px 15px rgba(0,0,0,0.3));
            transition: opacity 0.4s ease;
            opacity: 0;
            text-shadow: 0 0 20px gold, 0 0 40px #ffd966;
        }

        #trumpeterLeft {
            left: 2%;
        }
        #trumpeterRight {
            right: 2%;
        }

        /* image overlay */
        .image-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #2b1b16;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100000;
            color: white;
            font-size: clamp(1.2rem, 5vw, 2rem);
            font-family: 'Cormorant Garamond', serif;
            transition: opacity 0.5s;
            opacity: 0;
            pointer-events: none;
            padding: 1rem;
            cursor: pointer;
        }
        .image-overlay.show {
            display: flex;
            opacity: 1;
            pointer-events: auto;
        }
        .overlay-image {
            width: 90%;
            max-width: 700px;
            height: auto;
            max-height: 70vh;
            border-radius: 40px;
            box-shadow: 0 30px 40px rgba(0,0,0,0.6);
            border: 5px solid #e3b394;
            margin-bottom: 2rem;
            object-fit: contain;
            background: #fff;
            transition: opacity 0.3s ease;
        }
        .image-caption {
            letter-spacing: 4px;
            text-transform: uppercase;
            background: rgba(0,0,0,0.4);
            padding: 0.5rem 2rem;
            border-radius: 60px;
            backdrop-filter: blur(4px);
            text-align: center;
            font-size: clamp(1rem, 4vw, 1.8rem);
        }

        /* main envelope card */
        .envelope-container {
            max-width: min(660px, 95%);
            width: 100%;
            position: relative;
            margin: 1rem auto;
            filter: drop-shadow(0 28px 30px rgba(100, 50, 45, 0.3));
            z-index: 20;
            transition: opacity 0.3s;
        }
        .envelope-container.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .envelope-back {
            background: #f7e3db;
            background-image: repeating-linear-gradient(45deg, #faeae5 0px, #faeae5 2px, #fef1ea 2px, #fef1ea 8px);
            border-radius: clamp(20px, 5vw, 32px) clamp(20px, 5vw, 32px) clamp(18px, 4vw, 28px) clamp(18px, 4vw, 28px);
            padding: clamp(1.2rem, 4vw, 2.2rem);
            border: 2px solid rgba(170, 120, 100, 0.5);
            box-shadow: 0 0 0 2px #fbe9e2 inset, 0 12px 20px -6px rgba(120, 65, 55, 0.5);
            position: relative;
            z-index: 2;
        }

        .popped-out {
            background: #fffbf9;
            background-image: 
                radial-gradient(circle at 15% 25%, rgba(255, 235, 225, 0.8) 0%, transparent 30%),
                radial-gradient(circle at 90% 75%, #ffe8df 0%, transparent 45%),
                linear-gradient(145deg, #ffffff, #fdf3ee);
            border-radius: clamp(18px, 4vw, 26px) clamp(18px, 4vw, 26px) clamp(16px, 3.5vw, 22px) clamp(16px, 3.5vw, 22px);
            padding: clamp(1.2rem, 4vw, 2rem);
            border: 2px solid rgba(190, 135, 115, 0.6);
            box-shadow: 
                0 18px 32px -10px rgba(130, 65, 55, 0.6),
                0 0 0 2px #ffeade inset,
                0 6px 0 -1px #cfa292;
            transform: translateY(-10px) scale(1.02);
            margin: -1.2rem 0.4rem 0 0.4rem;
            position: relative;
            z-index: 20;
            backdrop-filter: blur(4px);
        }

        .clickable-header {
            cursor: pointer;
            transition: 0.2s;
            display: inline-block;
            padding: 0 clamp(10px, 3vw, 20px);
            border-radius: 60px;
            background: rgba(255, 235, 210, 0.3);
            margin-left: clamp(0px, 10vw, 100px);
            width: fit-content;
        }

        .main-header {
            font-family: 'Cormorant Garamond', serif;
            font-size: clamp(2.5rem, 10vw, 4.6rem);
            font-weight: 700;
            letter-spacing: clamp(4px, 1.5vw, 8px);
            color: #562e26;
            text-align: center;
            line-height: 1.1;
            margin-bottom: 0.2rem;
            text-transform: uppercase;
            text-shadow: 2px 2px 0 #fad3c2, 4px 4px 0 rgba(190, 120, 90, 0.1);
            word-break: break-word;
        }

        .sub-date {
            font-family: 'Cormorant Garamond', serif;
            font-size: clamp(1.2rem, 4.5vw, 1.7rem);
            font-weight: 500;
            color: #7e4f42;
            text-align: center;
            border: 1px solid rgba(175, 120, 95, 0.5);
            padding: 0.4rem 1.2rem;
            display: inline-block;
            margin: 0.2rem auto 1.2rem auto;
            margin-left: clamp(0px, 8vw, 90px);
            background: rgba(255, 235, 220, 0.7);
            border-radius: 60px;
            backdrop-filter: blur(4px);
            box-shadow: 0 2px 8px #fad3be;
            width: fit-content;
            max-width: 90%;
        }

        .couple-names {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(2rem, 7vw, 3.2rem);
            font-weight: 700;
            color: #aa3c30;
            text-align: center;
            line-height: 1.3;
            margin: 0.6rem 0 0.2rem;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
            gap: 0.2rem 0.5rem;
        }
        .couple-names span {
            background: linear-gradient(115deg, #ffefe6, #ffe1d2);
            padding: 0.3rem 1rem;
            border-radius: 60px;
            box-shadow: 0 6px 12px #d8aa99;
            white-space: normal;
            border: 1px solid #f4c4b2;
            word-break: break-word;
        }
        .ampersand {
            font-family: 'Cormorant Garamond', serif;
            font-size: clamp(2.2rem, 7vw, 3.2rem);
            color: #b25746;
            text-shadow: 0 2px 4px #f7bfaa;
        }

        .invite-message {
            font-family: 'Sacramento', cursive;
            font-size: clamp(1.5rem, 5vw, 2.1rem);
            font-style: italic;
            color: #9f4638;
            text-align: center;
            margin: 0.8rem auto 1.5rem;
            background: #fff2e9;
            padding: 0.3rem 1.2rem;
            border-radius: 40px;
            width: fit-content;
            max-width: 95%;
            box-shadow: 0 4px 10px #ebbcab;
            border: 1px solid #fccab6;
        }

        .wedding-details {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            font-size: clamp(1.1rem, 4vw, 1.5rem);
            font-weight: 500;
            color: #38231e;
            margin: 1.4rem 0 0.8rem;
        }
        .detail-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255, 239, 228, 0.8);
            padding: 0.4rem 1rem;
            border-radius: 50px;
            border: 1px solid #dfb09e;
            backdrop-filter: blur(4px);
            box-shadow: 0 4px 8px #edd9cf;
            flex-wrap: wrap;
            justify-content: center;
        }
        .detail-icon {
            font-size: clamp(1.5rem, 5vw, 2rem);
        }
        .venue-special {
            font-weight: 700;
            color: #a23d2b;
            word-break: break-word;
        }

        .reception {
            font-size: clamp(1.4rem, 5vw, 1.9rem);
            font-weight: 600;
            font-style: italic;
            color: #9c4232;
            text-align: center;
            margin: 0.6rem auto 1.4rem;
            margin-left: clamp(0px, 8vw, 100px);
            border-bottom: 2px solid #e3b09d;
            display: inline-block;
            padding: 0 1rem 0.3rem;
            width: fit-content;
        }

        .countdown-wrapper {
            background: rgba(245, 215, 200, 0.5);
            border-radius: 60px;
            padding: 1.2rem 0.8rem;
            margin: 1.2rem 0 1.8rem;
            backdrop-filter: blur(6px);
            border: 2px solid #ecc2af;
            box-shadow: inset 0 0 20px #fff1e3, 0 8px 16px -6px #bf8d7b;
        }
        .timer {
            display: flex;
            justify-content: center;
            gap: clamp(0.5rem, 2vw, 1.2rem);
            font-family: 'Montserrat', sans-serif;
            flex-wrap: wrap;
        }
        .timer-block {
            min-width: clamp(45px, 15vw, 62px);
            text-align: center;
        }
        .timer-number {
            font-size: clamp(1.8rem, 6vw, 2.4rem);
            font-weight: 500;
            background: rgba(255, 250, 240, 0.8);
            border-radius: 18px;
            color: #972f20;
            line-height: 1.4;
            border: 1px solid #eeb9a5;
            padding: 0.1rem 0.2rem;
        }
        .timer-label {
            font-size: clamp(0.6rem, 2.5vw, 0.8rem);
            letter-spacing: 1px;
            color: #7b4d3f;
        }

        /* Button container for action buttons */
        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin: 1.2rem 0 1rem;
        }

        .rsvp-btn, #copyBtn {
            font-family: 'Cormorant Garamond', serif;
            font-size: clamp(1.6rem, 6vw, 2.2rem);
            font-weight: 600;
            background: linear-gradient(135deg, #eac2b0, #d69d86);
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 60px;
            color: #2b1611;
            letter-spacing: 1px;
            box-shadow: 0 12px 18px -6px #b2604b, 0 0 0 2px #fee5d6 inset;
            cursor: pointer;
            transition: 0.25s;
            border: 1px solid #ffe5d4;
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
            min-height: 60px;
        }

        #copyBtn {
            background: linear-gradient(135deg, #d8b4a2, #c49a84);
            margin-top: 0.5rem;
        }

        .rsvp-btn:hover, #copyBtn:hover {
            background: linear-gradient(135deg, #f6cfbe, #e8b49d);
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 22px 28px -10px #a84d38;
        }

        .family-footer {
            margin-top: 1.6rem;
            font-size: clamp(1rem, 3.5vw, 1.3rem);
            text-align: center;
            color: #563b33;
            border-top: 2px dotted #daad9a;
            padding-top: 1.2rem;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.8rem 1.5rem;
        }
        .family-line span {
            font-weight: 700;
            color: #a73f30;
        }

        .surprise-message {
            position: fixed;
            bottom: 20px;
            right: 10px;
            left: 10px;
            background: #fff1e6;
            border: 2px solid #c4826b;
            border-radius: 40px;
            padding: 1rem;
            font-size: clamp(1rem, 4vw, 1.3rem);
            color: #3b1f18;
            opacity: 0;
            transition: 0.3s;
            pointer-events: none;
            box-shadow: 0 10px 20px #b1877a;
            z-index: 10000;
            text-align: center;
            width: auto;
            margin: 0 10px;
        }
        .surprise-message.show {
            opacity: 1;
        }

        /* Mobile specific adjustments */
        @media (max-width: 600px) {
            body {
                padding: 0.5rem;
            }

            .popped-out {
                padding: 1.2rem;
                transform: translateY(-5px) scale(1.01);
            }

            .clickable-header, .sub-date, .reception {
                margin-left: 0 !important;
                margin-right: auto;
            }

            .wedding-details {
                flex-direction: column;
                align-items: center;
            }

            .detail-item {
                width: 100%;
                justify-content: center;
                text-align: center;
                padding: 0.6rem;
            }

            .family-footer {
                flex-direction: column;
                gap: 0.5rem;
            }

            .action-buttons {
                width: 100%;
            }
        }

        @media (max-width: 380px) {
            .couple-names {
                flex-direction: column;
                gap: 0.3rem;
            }

            .timer-block {
                min-width: 35px;
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Dancing+Script:wght@400;700&family=Sacramento&family=Montserrat:wght@300;500&display=swap" rel="stylesheet">
</head>
<body>
    <!-- trumpeters -->
    <div id="trumpeterLeft" class="trumpeter">üé∫üé∫</div>
    <div id="trumpeterRight" class="trumpeter">üé∫üé∫</div>

    <!-- image overlay -->
    <div class="image-overlay" id="imageOverlay">
        <img class="overlay-image" id="overlayImage" src="" alt="location image">
        <div class="image-caption" id="imageCaption"></div>
        <div style="font-size: 1rem; margin-top: 1rem; opacity: 0.8;">Click anywhere to close</div>
    </div>

    <!-- main invitation card -->
    <div class="envelope-container" id="envelopeCard">
        <div class="envelope-back"></div>
        <div class="popped-out" id="poppedPanel">
            <div class="floral-corner floral-left"></div>
            <div class="floral-corner floral-right"></div>

            <!-- clickable ‡§∂‡•Å‡§≠‡§µ‡§ø‡§µ‡§æ‡§π header -->
            <div class="main-header clickable-header" id="shubhVichar">
                ‡§∂‡•Å‡§≠‡§µ‡§ø‡§µ‡§æ‡§π
            </div>

            <div class="sub-date">
                ‡•®‡•¶‡•Æ‡•® ‡§∏‡§æ‡§≤ ‡§´‡§æ‡§≤‡•ç‡§ó‡•Å‡§® ‡•ß‡•© ‡§ó‡§§‡•á, ‡§¨‡•Å‡§ß‡§µ‡§æ‡§∞
                <span style="font-size:0.9rem; display:block; color:#9e6253;">(Wed, Feb 25th, 2026)</span>
            </div>

            <div class="couple-names">
                <span>‡§ö‡§ø‡§∞‡§Ç‡§ú‡•Ä‡§µ‡•Ä ‡§Ü‡§Ø‡•Å‡§∑ ‡§™‡•ã‡§ñ‡§∞‡•á‡§≤</span>
                <span class="ampersand">&</span>
                <span>‡§Ü‡§Ø‡•Å‡§∑‡§æ ‡§Ü‡§ö‡§æ‡§∞‡•ç‡§Ø</span>
            </div>

            <div class="invite-message">
                ‚ÄúI invite you to this happy occasion!‚Äù
            </div>

            <!-- VENUE LINE (clickable) -->
            <div class="wedding-details" id="weddingDetails">
                <div class="detail-item">
                    <span class="detail-icon">‚è∞</span>
                    <span>Wed, Feb 25th, 2026 ¬∑ 9:00 am</span>
                </div>
                <div class="detail-item clickable-location" id="locationTrigger">
                    <span class="detail-icon">üìç</span>
                    <span class="venue-special">Durga Party Palace, Itahari 8</span>
                </div>
            </div>

            <div class="reception">‚ú® Reception to follow ‚ú®</div>

            <div class="countdown-wrapper">
                <div style="text-align:center; font-size:clamp(1rem, 4vw, 1.2rem); color:#744d3f; letter-spacing:3px;">countdown</div>
                <div class="timer" id="timer">
                    <div class="timer-block"><div class="timer-number" id="days">00</div><div class="timer-label">DAYS</div></div>
                    <div class="timer-block"><div class="timer-number" id="hours">00</div><div class="timer-label">HRS</div></div>
                    <div class="timer-block"><div class="timer-number" id="minutes">00</div><div class="timer-label">MIN</div></div>
                    <div class="timer-block"><div class="timer-number" id="seconds">00</div><div class="timer-label">SEC</div></div>
                </div>
            </div>

            <!-- Action buttons container -->
            <div class="action-buttons">
                <button class="rsvp-btn" id="rsvpBtn">RSVP now</button>
                <button id="copyBtn">üìã Copy Invitation</button>
            </div>

            <div class="family-footer">
                <div class="family-line"><span>‡§π‡§ú‡•Å‡§∞‡§Ü‡§Æ‡§æ :</span> ‡§∏‡•Å‡§∂‡§ø‡§≤‡§æ ‡§™‡•ã‡§ñ‡§∞‡•á‡§≤</div>
                <div class="family-line"><span>‡§¨‡•Å‡§µ‡§æ :</span> ‡§™‡•ç‡§∞‡§ï‡§æ‡§∂ ‡§™‡•ã‡§ñ‡§∞‡•á‡§≤</div>
                <div class="family-line"><span>‡§Ü‡§Æ‡§æ :</span> ‡§á‡§®‡•ç‡§¶‡§ø‡§∞‡§æ ‡§™‡•ã‡§ñ‡§∞‡•á‡§≤</div>
                <div class="family-line">‡§è‡§µ‡§Æ‡•ç ‡§∏‡§Æ‡§∏‡•ç‡§§ ‡§™‡•ã‡§ñ‡§∞‡•á‡§≤ ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞</div>
            </div>
        </div>
        <div class="surprise-message" id="surpriseMsg">üé∫ ‡§§‡•Å‡§∞‡§π‡•Ä ‡§¨‡§ú‡•á! üé∫</div>
    </div>

    <script>
        (function() {
            // wedding timer
            const wedding = new Date(2026, 1, 25, 9, 0, 0); 
            function refreshTimer() {
                const now = new Date();
                const diff = wedding - now;
                if (diff <= 0) {
                    document.getElementById('days').innerText = '00';
                    document.getElementById('hours').innerText = '00';
                    document.getElementById('minutes').innerText = '00';
                    document.getElementById('seconds').innerText = '00';
                    return;
                }
                const sec = Math.floor(diff / 1000);
                document.getElementById('days').innerText = Math.floor(sec / 86400).toString().padStart(2,'0');
                document.getElementById('hours').innerText = Math.floor((sec % 86400) / 3600).toString().padStart(2,'0');
                document.getElementById('minutes').innerText = Math.floor((sec % 3600) / 60).toString().padStart(2,'0');
                document.getElementById('seconds').innerText = (sec % 60).toString().padStart(2,'0');
            }
            refreshTimer();
            setInterval(refreshTimer, 1000);

            // RSVP button
            document.getElementById('rsvpBtn').addEventListener('click', () => {
                alert('‚ú® Thank you! Your presence is the greatest gift. ‚ú®\n\nWe have recorded your RSVP.');
            });

            // COPY BUTTON FUNCTIONALITY
            document.getElementById('copyBtn').addEventListener('click', function() {
                const header = document.querySelector('.main-header').innerText;
                const date = document.querySelector('.sub-date').innerText;
                const couple = document.querySelector('.couple-names').innerText;
                const message = document.querySelector('.invite-message').innerText;
                const details = Array.from(document.querySelectorAll('.detail-item')).map(el => el.innerText).join(' ¬∑ ');
                const reception = document.querySelector('.reception').innerText;
                const family = Array.from(document.querySelectorAll('.family-line')).map(el => el.innerText).join('\n');
                
                const fullInvitation = `${header}\n${date}\n${couple}\n${message}\n${details}\n${reception}\n\n${family}`;
                
                navigator.clipboard.writeText(fullInvitation).then(() => {
                    alert('‚ú® Invitation copied to clipboard! ‚ú®');
                }).catch(err => {
                    console.error('Error copying text: ', err);
                    alert('Could not copy. Please try manually.');
                });
            });

            // Trumpeter feature
            const leftTrumpet = document.getElementById('trumpeterLeft');
            const rightTrumpet = document.getElementById('trumpeterRight');
            const shubhHeader = document.getElementById('shubhVichar');
            const surpriseMsg = document.getElementById('surpriseMsg');
            let trumpetTimeout = null;

            function playTrumpets() {
                if (trumpetTimeout) clearTimeout(trumpetTimeout);
                leftTrumpet.style.opacity = '1';
                rightTrumpet.style.opacity = '1';
                surpriseMsg.classList.add('show');

                trumpetTimeout = setTimeout(() => {
                    leftTrumpet.style.opacity = '0';
                    rightTrumpet.style.opacity = '0';
                    setTimeout(() => surpriseMsg.classList.remove('show'), 300);
                }, 4000);
            }
            shubhHeader.addEventListener('click', playTrumpets);

            // ============== FIXED LOCATION FEATURE ==============
            const locationTrigger = document.getElementById('locationTrigger');
            const imageOverlay = document.getElementById('imageOverlay');
            const overlayImage = document.getElementById('overlayImage');
            const imageCaption = document.getElementById('imageCaption');
            const envelopeCard = document.getElementById('envelopeCard');
            const weddingDetails = document.getElementById('weddingDetails');

            const imageSequence = [
                { file: 'images/world.jpg', caption: 'üåç World' },
                { file: 'images/Nepal.jpg', caption: 'üá≥üáµ Nepal' },
                { file: 'images/Itahari..jpg', caption: 'üìç Itahari' },
                { file: 'images/Durga.jpg', caption: 'üè∞ Durga Party Palace' }
            ];

            let imageInterval = null;
            let currentIndex = 0;
            let isTransitioning = false;
            let preloadedImages = [];

            // Preload all images on page load
            function preloadAllImages() {
                imageSequence.forEach((item, index) => {
                    const img = new Image();
                    img.src = item.file;
                    preloadedImages[index] = img;
                    img.onerror = function() {
                        console.warn(`Failed to preload: ${item.file}`);
                        // Set fallback data URL for testing if needed
                        this.src = 'data:image/svg+xml;utf8,' + encodeURIComponent(`
                            <svg xmlns="http://www.w3.org/2000/svg" width="800" height="500" viewBox="0 0 800 500">
                                <rect width="800" height="500" fill="#f7d7c4"/>
                                <text x="50%" y="50%" font-family="Arial" font-size="24" fill="#8b5a4b" text-anchor="middle">${item.caption.replace(/[^a-zA-Z0-9 ]/g, '')}</text>
                            </svg>
                        `);
                    };
                });
            }

            function showImageWithCaption(index) {
                if (isTransitioning) return;
                isTransitioning = true;
                
                const item = imageSequence[index];
                
                // Update caption immediately
                imageCaption.innerText = item.caption;
                
                // Fade out current image
                overlayImage.style.transition = 'opacity 0.3s ease';
                overlayImage.style.opacity = '0.3';
                
                // Use preloaded image if available
                setTimeout(() => {
                    if (preloadedImages[index] && preloadedImages[index].complete) {
                        overlayImage.src = preloadedImages[index].src;
                    } else {
                        overlayImage.src = item.file;
                    }
                    
                    // Fade in new image
                    setTimeout(() => {
                        overlayImage.style.opacity = '1';
                        isTransitioning = false;
                    }, 50);
                }, 150);
            }

            function startImageSequence() {
                // Preload images if not already done
                if (preloadedImages.length === 0) {
                    preloadAllImages();
                }
                
                // Hide main card and show overlay
                envelopeCard.classList.add('hidden');
                imageOverlay.classList.add('show');
                
                // Hide wedding details during sequence
                weddingDetails.style.display = 'none';
                
                // Clear any existing interval
                if (imageInterval) {
                    clearInterval(imageInterval);
                    imageInterval = null;
                }
                
                // Start from first image
                currentIndex = 0;
                setTimeout(() => {
                    showImageWithCaption(currentIndex);
                }, 100);
                
                // Set up interval for next images
                imageInterval = setInterval(() => {
                    currentIndex++;
                    
                    if (currentIndex < imageSequence.length) {
                        showImageWithCaption(currentIndex);
                    } else {
                        // End of sequence
                        clearInterval(imageInterval);
                        imageInterval = null;
                        
                        // Show message to click to close
                        imageCaption.innerText = imageSequence[imageSequence.length-1].caption + ' ‚úì';
                        
                        // Auto close after 3 seconds
                        setTimeout(() => {
                            if (imageOverlay.classList.contains('show')) {
                                imageOverlay.classList.remove('show');
                                envelopeCard.classList.remove('hidden');
                                weddingDetails.style.display = 'flex';
                            }
                        }, 2000);
                    }
                }, 3000); // 3 seconds per image
            }

            // Close overlay when clicked
            imageOverlay.addEventListener('click', function() {
                if (imageInterval) {
                    clearInterval(imageInterval);
                    imageInterval = null;
                }
                imageOverlay.classList.remove('show');
                envelopeCard.classList.remove('hidden');
                weddingDetails.style.display = 'flex';
            });

            // Start sequence when location is clicked
            locationTrigger.addEventListener('click', startImageSequence);

            // ============== END FIXED LOCATION FEATURE ==============

            // Double-click surprise
            document.getElementById('poppedPanel').addEventListener('dblclick', function() {
                surpriseMsg.classList.add('show');
                if (navigator.vibrate) navigator.vibrate(50);
                setTimeout(() => surpriseMsg.classList.remove('show'), 2500);
            });

            // Glitter effect
            function createGlitterParticles(count) {
                for (let i = 0; i < count; i++) {
                    const glitter = document.createElement('div');
                    glitter.classList.add('glitter');
                    document.body.appendChild(glitter);
                    glitter.style.left = `${Math.random() * 100}%`;
                    glitter.style.animationDuration = `${Math.random() * 2.5 + 2.5}s`;
                    glitter.style.animationDelay = `${Math.random() * 3}s`;
                }
            }
            createGlitterParticles(60);
            setInterval(() => createGlitterParticles(5), 2000);

            // Celebration sound
            function playCelebrationSound() {
                try {
                    const audio = new Audio('sounds/celebration-sound.mp3');
                    audio.loop = true;
                    audio.volume = 0.4;
                    const playPromise = audio.play();
                    if (playPromise !== undefined) {
                        playPromise.catch(() => {
                            const startAudio = () => {
                                audio.play().catch(e => console.log('Audio still blocked:', e));
                                document.removeEventListener('click', startAudio);
                                document.removeEventListener('touchstart', startAudio);
                            };
                            document.addEventListener('click', startAudio);
                            document.addEventListener('touchstart', startAudio);
                        });
                    }
                } catch (error) {
                    console.log('Audio error:', error);
                }
            }
            playCelebrationSound();

            // Love easter egg
            let keys = [];
            window.addEventListener('keydown', (e) => {
                keys.push(e.key);
                if (keys.join('').toLowerCase().includes('love')) {
                    alert('‚ù§Ô∏è ‡§Ü‡§Ø‡•Å‡§∑ & ‡§Ü‡§Ø‡•Å‡§∑‡§æ ‚Äî forever ‚ù§Ô∏è');
                    keys = [];
                }
                if (keys.length > 10) keys.shift();
            });

            // Initialize on page load
            window.addEventListener('load', function() {
                weddingDetails.style.display = 'flex';
                preloadAllImages(); // Preload location images
            });
        })();
    </script>
</body>
</html>